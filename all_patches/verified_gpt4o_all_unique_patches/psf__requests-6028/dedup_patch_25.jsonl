{"model_name_or_path": "agentless", "instance_id": "psf__requests-6028", "model_patch": "diff --git a/requests/sessions.py b/requests/sessions.py\nindex 594e72b..67f9024 100644\n--- a/requests/sessions.py\n+++ b/requests/sessions.py\n@@ -620,8 +620,7 @@ class Session(SessionRedirectMixin):\n         kwargs.setdefault('stream', self.stream)\n         kwargs.setdefault('verify', self.verify)\n         kwargs.setdefault('cert', self.cert)\n-        if 'proxies' not in kwargs:\n-            kwargs['proxies'] = resolve_proxies(\n+        proxies = kwargs.get('proxies') or resolve_proxies(\n                 request, self.proxies, self.trust_env\n             )\n \n"}
