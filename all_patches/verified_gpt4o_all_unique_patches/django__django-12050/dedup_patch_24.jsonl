{"model_name_or_path": "agentless", "instance_id": "django__django-12050", "model_patch": "diff --git a/django/db/models/lookups.py b/django/db/models/lookups.py\nindex ba8a5e5..cf7eda6 100644\n--- a/django/db/models/lookups.py\n+++ b/django/db/models/lookups.py\n@@ -71,6 +71,9 @@ class Lookup:\n         if hasattr(self.rhs, 'resolve_expression'):\n             return self.rhs\n         if self.prepare_rhs and hasattr(self.lhs.output_field, 'get_prep_value'):\n+            # Preserve the type of rhs if it's an iterable\n+            if isinstance(self.rhs, (list, tuple, set)):\n+                return type(self.rhs)(self.lhs.output_field.get_prep_value(value) for value in self.rhs)\n             return self.lhs.output_field.get_prep_value(self.rhs)\n         return self.rhs\n \n", "occurrence": 1}
