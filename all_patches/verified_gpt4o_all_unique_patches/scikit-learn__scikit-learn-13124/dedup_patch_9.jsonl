{"model_name_or_path": "agentless", "instance_id": "scikit-learn__scikit-learn-13124", "model_patch": "diff --git a/sklearn/model_selection/_split.py b/sklearn/model_selection/_split.py\nindex 1bd5697..2c66cef 100644\n--- a/sklearn/model_selection/_split.py\n+++ b/sklearn/model_selection/_split.py\n@@ -645,7 +645,11 @@ class StratifiedKFold(_BaseKFold):\n                            \" be less than n_splits=%d.\"\n                            % (min_groups, self.n_splits)), Warning)\n \n-        # pre-assign each sample to a test fold index using individual KFold\n+        if self.shuffle:\n+            for i in range(len(unique_y)):\n+                y_inversed[y_inversed == i] = rng.permutation(y_counts[i])\n+\n+        # Pre-assign each sample to a test fold index using individual KFold\n         # splitting strategies for each class so as to respect the balance of\n         # classes\n         # NOTE: Passing the data corresponding to ith class say X[y==class_i]\n"}
