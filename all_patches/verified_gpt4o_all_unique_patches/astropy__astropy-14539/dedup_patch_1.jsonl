{"model_name_or_path": "agentless", "instance_id": "astropy__astropy-14539", "model_patch": "diff --git a/astropy/io/fits/diff.py b/astropy/io/fits/diff.py\nindex 0555397..281867d 100644\n--- a/astropy/io/fits/diff.py\n+++ b/astropy/io/fits/diff.py\n@@ -516,10 +516,10 @@ class TableDataDiff(_BaseDiff):\n                     self.diff_column_attributes.append(((col.name.upper(), attr), (vala, valb)))\n             arra = self.a[col.name]\n             arrb = self.b[col.name]\n-            if np.issubdtype(arra.dtype, np.floating) and np.issubdtype(arrb.dtype, np.floating):\n+            if 'P' in col.format:\n+                diffs = ([idx for idx in range(len(arra)) if not np.array_equal(arra[idx], arrb[idx])],)\n+            elif np.issubdtype(arra.dtype, np.floating) and np.issubdtype(arrb.dtype, np.floating):\n                 diffs = where_not_allclose(arra, arrb, rtol=self.rtol, atol=self.atol)\n-            elif 'P' in col.format:\n-                diffs = ([idx for idx in range(len(arra)) if not np.allclose(arra[idx], arrb[idx], rtol=self.rtol, atol=self.atol)],)\n             else:\n                 diffs = np.where(arra != arrb)\n             self.diff_total += len(set(diffs[0]))"}
