{"model_name_or_path": "agentless", "instance_id": "astropy__astropy-14539", "model_patch": "diff --git a/astropy/io/fits/diff.py b/astropy/io/fits/diff.py\nindex 0a08301..72cf74a 100644\n--- a/astropy/io/fits/diff.py\n+++ b/astropy/io/fits/diff.py\n@@ -1445,20 +1445,18 @@ class TableDataDiff(_BaseDiff):\n             arra = self.a[col.name]\n             arrb = self.b[col.name]\n \n-            if np.issubdtype(arra.dtype, np.floating) and np.issubdtype(\n-                arrb.dtype, np.floating\n-            ):\n-                diffs = where_not_allclose(arra, arrb, rtol=self.rtol, atol=self.atol)\n-            elif \"P\" in col.format:\n+            if \"P\" in col.format:\n                 diffs = (\n                     [\n                         idx\n                         for idx in range(len(arra))\n-                        if not np.allclose(\n-                            arra[idx], arrb[idx], rtol=self.rtol, atol=self.atol\n-                        )\n+                        if not np.array_equal(arra[idx], arrb[idx])\n                     ],\n                 )\n+            elif np.issubdtype(arra.dtype, np.floating) and np.issubdtype(\n+                arrb.dtype, np.floating\n+            ):\n+                diffs = where_not_allclose(arra, arrb, rtol=self.rtol, atol=self.atol)\n             else:\n                 diffs = np.where(arra != arrb)\n \n"}
