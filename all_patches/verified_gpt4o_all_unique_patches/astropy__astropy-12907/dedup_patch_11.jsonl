{"model_name_or_path": "agentless", "instance_id": "astropy__astropy-12907", "model_patch": "diff --git a/astropy/modeling/separable.py b/astropy/modeling/separable.py\nindex 198a838..665708a 100644\n--- a/astropy/modeling/separable.py\n+++ b/astropy/modeling/separable.py\n@@ -54,7 +54,12 @@ def _coord_matrix(model, pos, noutp):\n         else:\n             mat[-model.n_outputs:, -model.n_inputs:] = m\n         return mat\n-    if not model.separable:\n+    if isinstance(model, CompoundModel):\n+        left, right = (model.left, model.right)\n+        cleft = _coord_matrix(left, 'left', left.n_outputs)\n+        cright = _coord_matrix(right, 'right', right.n_outputs)\n+        mat = _cstack(cleft, cright)\n+    elif not model.separable:\n         mat = np.zeros((noutp, model.n_inputs))\n         if pos == 'left':\n             mat[:model.n_outputs, :model.n_inputs] = 1"}
