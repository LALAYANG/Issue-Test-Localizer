{"model_name_or_path": "agentless", "instance_id": "django__django-15973", "model_patch": "diff --git a/django/db/models/fields/related.py b/django/db/models/fields/related.py\nindex 19949c1..b45be4f 100644\n--- a/django/db/models/fields/related.py\n+++ b/django/db/models/fields/related.py\n@@ -1383,6 +1383,13 @@ class ManyToManyField(RelatedField):\n             through_fields=through_fields,\n             db_constraint=db_constraint,\n         )\n+        if isinstance(through, str):\n+            def resolve_through_model():\n+                resolved_model = kwargs['apps'].get_model(through)\n+                self.rel.through = resolved_model\n+                resolved_model._meta.auto_created = False\n+            from django.db.models.signals import class_prepared\n+            class_prepared.connect(resolve_through_model)\n         self.has_null_arg = \"null\" in kwargs\n \n         super().__init__(\n"}
