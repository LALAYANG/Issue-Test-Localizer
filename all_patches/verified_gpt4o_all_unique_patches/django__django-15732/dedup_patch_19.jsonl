{"model_name_or_path": "agentless", "instance_id": "django__django-15732", "model_patch": "diff --git a/django/db/backends/postgresql/introspection.py b/django/db/backends/postgresql/introspection.py\nindex 15d7bc4..89233cf 100644\n--- a/django/db/backends/postgresql/introspection.py\n+++ b/django/db/backends/postgresql/introspection.py\n@@ -207,16 +207,21 @@ class DatabaseIntrospection(BaseDatabaseIntrospection):\n             [table_name],\n         )\n         for constraint, columns, kind, used_cols, options in cursor.fetchall():\n-            constraints[constraint] = {\n-                \"columns\": columns,\n-                \"primary_key\": kind == \"p\",\n-                \"unique\": kind in [\"p\", \"u\"],\n-                \"foreign_key\": tuple(used_cols.split(\".\", 1)) if kind == \"f\" else None,\n-                \"check\": kind == \"c\",\n-                \"index\": False,\n-                \"definition\": None,\n-                \"options\": options,\n-            }\n+            # Only add the constraint if it's not already present\n+            if constraint not in constraints:\n+                constraints[constraint] = {\n+                    \"columns\": columns,\n+                    \"primary_key\": kind == \"p\",\n+                    \"unique\": kind == \"u\",  # Only mark as unique if it's explicitly a unique constraint\n+                    \"foreign_key\": tuple(used_cols.split(\".\", 1)) if kind == \"f\" else None,\n+                    \"check\": kind == \"c\",\n+                    \"index\": False,\n+                    \"definition\": None,\n+                    \"options\": options,\n+                }\n+            else:\n+                # Update existing constraint if necessary\n+                constraints[constraint][\"unique\"] = constraints[constraint][\"unique\"] or kind == \"u\"\n         # Now get indexes\n         cursor.execute(\n             \"\"\"\n@@ -292,4 +297,4 @@ class DatabaseIntrospection(BaseDatabaseIntrospection):\n                     \"definition\": definition,\n                     \"options\": options,\n                 }\n-        return constraints\n+        return constraints\n"}
