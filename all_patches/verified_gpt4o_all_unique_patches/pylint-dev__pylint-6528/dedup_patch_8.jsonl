{"model_name_or_path": "agentless", "instance_id": "pylint-dev__pylint-6528", "model_patch": "diff --git a/pylint/lint/expand_modules.py b/pylint/lint/expand_modules.py\nindex 94af730..7762088 100644\n--- a/pylint/lint/expand_modules.py\n+++ b/pylint/lint/expand_modules.py\n@@ -126,24 +126,30 @@ def expand_modules(\n             for subfilepath in modutils.get_module_files(\n                 os.path.dirname(filepath), ignore_list, list_all=is_namespace\n             ):\n-                if filepath == subfilepath:\n+                if filepath == subfilepath or basename in ignore_list:\n                     continue\n                 if _is_in_ignore_list_re(\n                     os.path.basename(subfilepath), ignore_list_re\n                 ) or _is_in_ignore_list_re(subfilepath, ignore_list_paths_re):\n                     continue\n+                \n+                # Additional check to ensure parent directories are not ignored\n+                parent_dir = os.path.dirname(subfilepath)\n+                if any(\n+                    _is_in_ignore_list_re(parent, ignore_list_re) or\n+                    _is_in_ignore_list_re(parent, ignore_list_paths_re)\n+                    for parent in parent_dir.split(os.sep)\n+                ):\n+                    continue\n \n-                modpath = _modpath_from_file(\n-                    subfilepath, is_namespace, path=additional_search_path\n-                )\n-                submodname = \".\".join(modpath)\n+                modname += f'.{os.path.splitext(basename)[0]}'\n                 result.append(\n                     {\n                         \"path\": subfilepath,\n-                        \"name\": submodname,\n+                        \"name\": modname,\n                         \"isarg\": False,\n                         \"basepath\": filepath,\n                         \"basename\": modname,\n                     }\n                 )\n-    return result, errors\n+    return result, errors\n", "occurrence": 1}
