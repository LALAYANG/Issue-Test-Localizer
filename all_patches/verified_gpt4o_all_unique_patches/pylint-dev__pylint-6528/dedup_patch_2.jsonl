{"model_name_or_path": "agentless", "instance_id": "pylint-dev__pylint-6528", "model_patch": "diff --git a/pylint/lint/expand_modules.py b/pylint/lint/expand_modules.py\nindex 37bdd47..28da5f5 100644\n--- a/pylint/lint/expand_modules.py\n+++ b/pylint/lint/expand_modules.py\n@@ -28,7 +28,15 @@ def expand_modules(files_or_modules: Sequence[str], ignore_list: list[str], igno\n     path = sys.path.copy()\n     for something in files_or_modules:\n         basename = os.path.basename(something)\n-        if basename in ignore_list or _is_in_ignore_list_re(os.path.basename(something), ignore_list_re) or _is_in_ignore_list_re(something, ignore_list_paths_re):\n+        if basename in ignore_list or _is_in_ignore_list_re(basename, ignore_list_re) or _is_in_ignore_list_re(something, ignore_list_paths_re):\n+            continue\n+        if os.path.isdir(something):\n+            for root, dirs, files in os.walk(something):\n+                for name in files:\n+                    filepath = os.path.join(root, name)\n+                    if os.path.basename(filepath) in ignore_list or _is_in_ignore_list_re(os.path.basename(filepath), ignore_list_re) or _is_in_ignore_list_re(filepath, ignore_list_paths_re):\n+                        continue\n+                    result.append({'path': filepath, 'name': '.'.join(modutils.modpath_from_file(filepath, path=additional_search_path)), 'isarg': False, 'basepath': filepath, 'basename': os.path.splitext(name)[0]})\n             continue\n         module_path = get_python_path(something)\n         additional_search_path = ['.', module_path] + path"}
