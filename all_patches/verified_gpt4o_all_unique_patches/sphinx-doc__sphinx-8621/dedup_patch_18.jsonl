{"model_name_or_path": "agentless", "instance_id": "sphinx-doc__sphinx-8621", "model_patch": "diff --git a/sphinx/roles.py b/sphinx/roles.py\nindex 307975f..ace771b 100644\n--- a/sphinx/roles.py\n+++ b/sphinx/roles.py\n@@ -32,10 +32,27 @@ if False:\n     from sphinx.environment import BuildEnvironment\n \n \n+def kbd_role(name, rawtext, text, lineno, inliner, options={}, content=[]):\n+    kbd_parts = parse_kbd_content(text)\n+    node = nodes.literal(rawtext, '', classes=['kbd'])\n+    for part in kbd_parts:\n+        node += nodes.literal(part, part, classes=['kbd'])\n+    return [node], []\n+\n+import re\n+\n+def parse_kbd_content(content):\n+    # Regex to find compound keys, e.g., \"Shift-+\" should not split on \"+\"\n+    key_parts = re.split(r'(?<![\\\\])-', content)\n+    return [part.replace('\\\\', '') for part in key_parts]\n+\n+class LiteralEmphasisNode(nodes.literal, nodes.emphasis):\n+    pass\n+\n generic_docroles = {\n     'command': addnodes.literal_strong,\n     'dfn': nodes.emphasis,\n-    'kbd': nodes.literal,\n+    'kbd': kbd_role,\n     'mailheader': addnodes.literal_emphasis,\n     'makevar': addnodes.literal_strong,\n     'manpage': addnodes.manpage,\n"}
