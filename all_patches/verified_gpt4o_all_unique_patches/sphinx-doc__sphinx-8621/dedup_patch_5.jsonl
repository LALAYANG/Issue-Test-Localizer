{"model_name_or_path": "agentless", "instance_id": "sphinx-doc__sphinx-8621", "model_patch": "diff --git a/sphinx/roles.py b/sphinx/roles.py\nindex 307975f..2f3c714 100644\n--- a/sphinx/roles.py\n+++ b/sphinx/roles.py\n@@ -35,7 +35,7 @@ if False:\n generic_docroles = {\n     'command': addnodes.literal_strong,\n     'dfn': nodes.emphasis,\n-    'kbd': nodes.literal,\n+    'kbd': addnodes.literal_kbd,\n     'mailheader': addnodes.literal_emphasis,\n     'makevar': addnodes.literal_strong,\n     'manpage': addnodes.manpage,\n@@ -132,7 +132,8 @@ class XRefRole(ReferenceRole):\n \n     def create_non_xref_node(self) -> Tuple[List[Node], List[system_message]]:\n         text = utils.unescape(self.text[1:])\n-        if self.fix_parens:\n+        if self.fix_parens and 'kbd' in self.rawtext:\n+            text = process_kbd_role(text)\n             self.has_explicit_title = False  # treat as implicit\n             text, target = self.update_title_and_target(text, \"\")\n \n@@ -144,7 +145,8 @@ class XRefRole(ReferenceRole):\n         title = self.title\n         if self.lowercase:\n             target = target.lower()\n-        if self.fix_parens:\n+        if self.fix_parens and 'kbd' in self.rawtext:\n+            text = process_kbd_role(text)\n             title, target = self.update_title_and_target(title, target)\n \n         # create the reference node\n"}
