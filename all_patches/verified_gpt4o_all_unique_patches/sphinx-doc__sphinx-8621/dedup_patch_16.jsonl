{"model_name_or_path": "agentless", "instance_id": "sphinx-doc__sphinx-8621", "model_patch": "--- a/sphinx/roles.py\n+++ b/sphinx/roles.py\n-generic_docroles = {'command': addnodes.literal_strong, 'dfn': nodes.emphasis, 'kbd': nodes.literal, 'mailheader': addnodes.literal_emphasis, 'makevar': addnodes.literal_strong, 'manpage': addnodes.manpage, 'mimetype': addnodes.literal_emphasis, 'newsgroup': addnodes.literal_emphasis, 'program': addnodes.literal_strong, 'regexp': nodes.literal}\n+generic_docroles = {'command': addnodes.literal_strong, 'dfn': nodes.emphasis, 'kbd': lambda rawtext, text, **options: handle_kbd_role(rawtext, text, **options), 'mailheader': addnodes.literal_emphasis, 'makevar': addnodes.literal_strong, 'manpage': addnodes.manpage, 'mimetype': addnodes.literal_emphasis, 'newsgroup': addnodes.literal_emphasis, 'program': addnodes.literal_strong, 'regexp': nodes.literal}\n+def handle_kbd_role(rawtext, text, **options):\n+    if '-' in text or '+' in text or '^' in text:\n+        keystrokes = re.split('([-+^])', text)\n+        nodes_list = [nodes.literal(rawtext, keystroke, **options) if keystroke not in '-+^' else nodes.Text(keystroke) for keystroke in keystrokes]\n+        return nodes.literal(rawtext, '', *nodes_list, **options)\n+    else:\n+        return nodes.literal(rawtext, text, **options)"}
