{"model_name_or_path": "agentless", "instance_id": "sympy__sympy-13031", "model_patch": "diff --git a/sympy/matrices/expressions/blockmatrix.py b/sympy/matrices/expressions/blockmatrix.py\nindex a79ab56..1a0bfc9 100644\n--- a/sympy/matrices/expressions/blockmatrix.py\n+++ b/sympy/matrices/expressions/blockmatrix.py\n@@ -226,8 +226,9 @@ class BlockDiagMatrix(BlockMatrix):\n \n     @property\n     def shape(self):\n-        return (sum(block.rows for block in self.args),\n-                sum(block.cols for block in self.args))\n+        numrows = 0 if all(block.rows == 0 for block in self.args) else max(block.rows for block in self.args)\n+        numcols = 0 if all(block.cols == 0 for block in self.args) else sum(block.cols for block in self.args)\n+        return (numrows, numcols)\n \n     @property\n     def blockshape(self):\n"}
